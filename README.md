# 🎰 약준모 룰렛 모듈 (Roulette/Neon)

약준모(약사 준비 모임)를 위한 라이믹스(Rhymix) 전용 이벤트 룰렛 모듈입니다.
**Neon Glassmorphism** 디자인이 적용되어 있으며, 관리자 페이지에서 확률과 아이템을 손쉽게 설정할 수 있습니다.

![Preview](skins/default/img/preview.png) (이미지가 있다면 추가)

---

## 🛠 설치 방법 (Installation)

1.  **파일 업로드**
    *   다운로드 받은 `roulette` 폴더를 라이믹스 설치 경로의 `modules/` 디렉토리 안에 업로드합니다.
    *   최종 경로: `/modules/roulette`

2.  **모듈 설치/업데이트**
    *   라이믹스 관리자 페이지 > **모듈/애드온** 메뉴로 이동합니다.
    *   **'룰렛 (Roulette)'** 모듈을 찾아 **[설치]** 또는 **[업데이트]** 버튼을 클릭합니다.
    *   자동으로 DB 테이블(`rx_roulette_tickets`, `rx_roulette_log`)이 생성됩니다.

---

## ⚙️ 설정 방법 (Configuration)

관리자 페이지에서 룰렛의 당첨 항목, 확률, 디자인 색상을 엑셀처럼 쉽게 관리할 수 있습니다.

1.  관리자 페이지 > **룰렛 (Roulette)** 모듈 클릭.
2.  **[설정]** 탭으로 이동.
3.  **Spin Duration**: 룰렛이 돌아가는 시간(ms)을 설정합니다 (기본 5000ms = 5초).
4.  **Items Configuration (아이템 설정)**:
    *   **테이블(표)** 형태로 아이템이 표시됩니다.
    *   **[+ Add Item]**: 새로운 당첨 항목을 추가합니다.
    *   **Name (Admin)**: 관리자용 식별 이름 (예: 1등 상품).
    *   **Text (Wheel)**: 룰렛 판에 표시될 큰 글씨 (예: 1000).
    *   **SubText**: 룰렛 판에 표시될 작은 글씨 (예: 포인트).
    *   **Type**: `Point`(포인트 지급) 또는 `Ticket`(티켓 반환).
    *   **Value**: 지급할 포인트 양.
    *   **Weight**: 당첨 가중치 (확률). 높을수록 당첨 확률이 높습니다.
    *   **Color**: 해당 칸의 배경색.
    *   **Text Color**: 글자 색상.
    *   **Del**: 해당 항목 삭제.
5.  **[Save]** 버튼을 눌러 저장합니다.

---

## 🔗 사이트 적용 및 호출 방법

### 1. 사이트 메뉴에 추가하기 (권장)
가장 일반적이고 쉬운 방법입니다.
1.  **사이트 디자인** > **사이트 메뉴 편집**.
2.  원하는 메뉴 위치 선택 > **[메뉴 추가]**.
3.  **모듈** 탭 선택 > **'룰렛 (Roulette)'** 선택.
4.  메뉴 이름 입력 후 저장.
5.  이제 해당 메뉴를 클릭하면 룰렛 페이지로 이동합니다.

### 2. 직접 링크 (URL)
배너나 버튼에 직접 링크를 걸어 이동시킬 수 있습니다.
*   URL: `http://일반주소/?act=dispRouletteIndex`
*   짧은주소(mid)를 생성했다면: `http://일반주소/mid_name`

### 3. 모달(팝업)로 띄우기 (고급)
이 모듈은 기본적으로 **전체 페이지** 형태로 동작합니다. 만약 현재 보고 있는 페이지 위에 팝업처럼 띄우고 싶다면 **레이아웃 스크립트**나 **위젯**을 이용해 Iframe으로 호출하거나, 레이아웃을 `기본(Blank)`로 설정하여 새창으로 띄우는 것을 권장합니다.

---

## 📂 파일 구조 및 개발 정보

*   **`conf/`**: 모듈 설정 파일 (`info.xml`, `module.xml`) - 구형 XE 표준 호환
*   **`skins/default/`**: 프론트엔드 디자인 파일
    *   `roulette.html`: 뷰 템플릿 (HTML 구조)
    *   `css/style.css`: 네온 스타일 디자인 (Scoped to `.rx-roulette-app`)
    *   `js/script.js`: 룰렛 게임 로직 (Canvas Drawing, Animation)
*   **`roulette.controller.php`**: 핵심 로직
    *   `procRoulettePlay`: 룰렛 실행, 확률 계산, 티켓 차감, 포인트 지급, 로그 저장.
*   **`schemas/`**:
    *   `rx_roulette_tickets`: 유저별 티켓 보유량 저장.
    *   `rx_roulette_log`: 누가 언제 무엇을 당첨받았는지 기록.

---

## ❓ 자주 묻는 질문 (Troubleshooting)

**Q. 룰렛이 돌지 않고 멈춰있어요.**
A. 브라우저 콘솔(F12)을 확인해보세요. 만약 자바스크립트 오류가 없다면, 티켓이 부족한 경우일 수 있습니다. 관리자 권한으로 로그인하면 '티켓 충전' 버튼이 보입니다.

**Q. 디자인이 깨져서 보여요.**
A. `skins/default/css/style.css` 파일이 제대로 로드되지 않은 것일 수 있습니다. 강력 새로고침(Ctrl+F5)을 해보시거나, 레이아웃 설정에서 충돌이 없는지 확인하세요.

**Q. 확률은 어떻게 계산되나요?**
A. 설정된 모든 아이템의 **Weight(가중치)** 총합을 구한 뒤, 랜덤 난수가 어느 구간에 속하는지로 결정됩니다. 가중치가 높을수록 당첨 확률이 비례하여 올라갑니다.

---
**제작**: Antigravity (2026)
